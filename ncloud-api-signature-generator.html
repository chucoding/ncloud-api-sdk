<!DOCTYPE html>
<html lang="ko">
<head>
    <!--
        ğŸ’š NCloud API Signature code generator ğŸ’š
        ğŸ™‹ğŸ»â€â™‚ï¸ Developer : ì„œí˜„ì„ 
        ğŸ”— LinkdIn : https://www.linkedin.com/in/chucoding/
        ğŸ§‘â€ğŸ¤â€ğŸ§‘ Blog : https://chucoding.tistory.com/
        ğŸ˜º Github : https://github.com/chucoding
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCloud API Signature code generator</title>
    <!-- Load CryptoJS from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
    </style>
</head>
<body>

    <h1>ğŸ’š NCloud API Signature code generator ğŸ’š</h1>
    <hr>
    <p>CLOVA Studio í•™ìŠµ APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ Header ì •ë³´ë“¤ì„ ë¹ ë¥´ê³  ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”„ë¡œê·¸ë¨ ì…ë‹ˆë‹¤. ğŸ˜€</p>
    <p><b>í•™ìŠµ ìƒì„± API, í•™ìŠµ ëª©ë¡ ì¡°íšŒ API</b> 2ê°€ì§€ë§Œ ë§Œë“¤ì–´ ë†“ì•˜ëŠ”ë° ì¶”ê°€ë¡œ í•„ìš”í•˜ì‹  APIê°€ ìˆë‹¤ë©´ ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì…”ì„œ ì§ì ‘ ì»¤ìŠ¤í…€ í•˜ì…”ì„œ ì‚¬ìš©í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>
    <a href="https://api.ncloud-docs.com/docs/ai-naver-clovastudio-summary" target="_blank">ğŸ¯ CLOVA Studio API ì „ì²´ ëª©ë¡ ë³´ëŸ¬ê°€ê¸°</a>
    <br><br><br>
    <p>ğŸ¤« ë„¤ì´ë²„í´ë¼ìš°ë“œ ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ í‚¤ê°€ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ë¡œì»¬í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”</p>
    <p>ğŸ” NCLOUD_ACCESS_KEY, NCLOUD_SECRET_KEY ë°œê¸‰ë°©ë²• : ë„¤ì´ë²„ í´ë¼ìš°ë“œ í”Œë«í¼ í¬í„¸ì˜ <b>ë§ˆì´í˜ì´ì§€</b> > <b>ê³„ì • ê´€ë¦¬</b> > <b>ì¸ì¦í‚¤ ê´€ë¦¬</b> - <a href="https://www.ncloud.com/mypage/manage/authkey" target="_blank">https://www.ncloud.com/mypage/manage/authkey</a></li>
    <br><br><br>
    Happy Hacking í•˜ì„¸ìš”ğŸ¤—
    <hr>
    <h3>ğŸª„ ë„¤ì´ë²„í´ë¼ìš°ë“œ ì½˜ì†”ì—ì„œ ë°œê¸‰ë°›ì€ í‚¤ë¥¼ ì…ë ¥í•˜ì‹  í›„ ì„œë¹„ìŠ¤ ëª©ë¡ì˜ ë²„íŠ¼ ì¤‘ ì„ íƒí•˜ì—¬ í´ë¦­í•˜ì„¸ìš”.</h3>
    <label for="input1">NCLOUD_ACCESS_KEY:</label>
    <input type="text" id="input1" placeholder="Enter text">

    <br>

    <label for="input2">NCLOUD_SECRET_KEY:</label>
    <input type="text" id="input2" placeholder="Enter text">

    <br>

    <hr>
    <h1>ì„œë¹„ìŠ¤ ëª©ë¡</h1>
    <h2>Clova Studio</h2>
    <button onclick="generator('clovastudio', '/tuning/v2/tasks', 'POST')">í•™ìŠµ ìƒì„± API</button>
    <button onclick="generator('clovastudio', '/tuning/v2/tasks', 'GET')">í•™ìŠµ ëª©ë¡ ì¡°íšŒ API</button>
    <div id="clovastudio"></div>

    <h2>SENS</h2>
    <button onclick="generator('sens', '/push/v2/services/ncp:push:kr:283492160171:til-alarm/users/chucoding', 'GET')">ë””ë°”ì´ìŠ¤/ì‚¬ìš©ì ì¡°íšŒ</button>
    <button onclick="generator('sens', '/push/v2/services/ncp:push:kr:283492160171:til-alarm/users/chucoding', 'DELETE')">ë””ë°”ì´ìŠ¤ ì‚­ì œ</button>
    <button onclick="generator('sens', '/push/v2/services/ncp:push:kr:283492160171:til-alarm/messages', 'POST')">ë©”ì‹œì§€ ë°œì†¡</button>
    <div id="sens"></div>

    <script>
        function generator(service_name, endpoint, method) {
            const ncloud_access_key = document.getElementById("input1").value;
            const ncloud_secret_key = document.getElementById("input2").value;
            const timestamp = new Date().getTime().toString();

            if (!ncloud_access_key) {
                alert("NCLOUD_ACCESS_KEY ê°’ì„ ì…ë ¥í•˜ì„¸ìš”.");
                return;
            }

            if (!ncloud_secret_key) {
                alert("NCLOUD_SECRET_KEY ê°’ì„ ì…ë ¥í•˜ì„¸ìš”.");
                return;
            }

            let url = "";
            switch (service_name) {
                case "clovastudio": 
                    url = "https://clovastudio.apigw.ntruss.com";
                    break;
                case "sens": 
                    url = "https://sens.apigw.ntruss.com";
                    break;
            }


            const message = makeSignature(ncloud_access_key, ncloud_secret_key, timestamp, endpoint, method);

            document.getElementById(service_name).innerHTML =
            "<h3>Request URL</h3><hr>["+method+"] "+url+""+endpoint+"<br><br>"
            + "<h3>Header</h3><hr>"
            + "x-ncp-apigw-timestamp: "+timestamp+"<br>"
            + "x-ncp-iam-access-key: "+ncloud_access_key+"<br>"
            + "x-ncp-apigw-signature-v2 : "+message;
        }

        function makeSignature(ncloud_access_key, ncloud_secret_key, timestamp, endpoint, method) {
            const space = " ";                  // one space
            const newLine = "\n";               // new line

            const hmac = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, ncloud_secret_key);
            hmac.update(method);
            hmac.update(space);
            hmac.update(endpoint);
            hmac.update(newLine);
            hmac.update(timestamp);
            hmac.update(newLine);
            hmac.update(ncloud_access_key);
        
            const hash = hmac.finalize();
            return hash.toString(CryptoJS.enc.Base64);
        }
    </script>
</body>
</html>